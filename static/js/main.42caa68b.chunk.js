(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){e.exports=a.p+"static/media/btc.e73cb1b2.svg"},112:function(e,t,a){e.exports=a.p+"static/media/eth.18708d3e.svg"},113:function(e,t,a){e.exports=a.p+"static/media/spinner.a596700e.svg"},114:function(e,t,a){e.exports=a.p+"static/media/metamask.dcf1fb0e.svg"},115:function(e,t,a){e.exports=a.p+"static/media/ledger.4cfa0cb4.svg"},116:function(e,t,a){e.exports=a.p+"static/media/ledger_purple.db956da8.svg"},117:function(e,t,a){e.exports=a.p+"static/media/wallet-icon.1755dc6e.svg"},118:function(e,t,a){e.exports=a.p+"static/media/assets-bg.df3317e4.svg"},119:function(e,t,a){e.exports=a.p+"static/media/tick.91b58e9e.svg"},120:function(e,t,a){e.exports=a.p+"static/media/error.9c76fef5.svg"},121:function(e,t,a){e.exports=a.p+"static/media/lock.6b34fdcb.svg"},122:function(e,t,a){e.exports=a.p+"static/media/switch.31f6da16.svg"},123:function(e,t,a){e.exports=a.p+"static/media/close.4ceeeab0.svg"},124:function(e,t,a){e.exports=a.p+"static/media/logo.f8b51b82.png"},125:function(e,t,a){e.exports=a.p+"static/media/logo-text.3c2c3338.png"},220:function(e,t,a){e.exports=a(411)},225:function(e,t,a){},258:function(e,t,a){},260:function(e,t,a){},262:function(e,t,a){},264:function(e,t,a){},266:function(e,t,a){},268:function(e,t,a){},30:function(e,t,a){e.exports=a.p+"static/media/completed.c5ff6920.svg"},352:function(e,t,a){},354:function(e,t,a){},356:function(e,t,a){},358:function(e,t,a){},360:function(e,t,a){},362:function(e,t,a){},364:function(e,t,a){},366:function(e,t,a){},368:function(e,t,a){},370:function(e,t,a){},372:function(e,t,a){},374:function(e,t,a){},376:function(e,t,a){},378:function(e,t,a){},380:function(e,t,a){},382:function(e,t,a){},384:function(e,t,a){},386:function(e,t,a){},388:function(e,t,a){},407:function(e,t,a){},409:function(e,t,a){},411:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),c=a(34),i=a.n(c),o=(a(225),a(3)),l=a(4),u=a(7),p=a(5),d=a(6),m=a(11),h=a(21),f=a(28),b=a(110),y=a(8),w=a.n(y),v=a(13),E={SET_ERROR:"SET_ERROR"};function C(){return{type:E.SET_ERROR,error:null}}var g={setError:function(e){return t=Object(v.a)(w.a.mark(function t(a){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n&&clearTimeout(n),n=setTimeout(function(){a(C())},1e4),a({type:E.SET_ERROR,error:e});case 3:case"end":return t.stop()}},t,this)})),function(e){return t.apply(this,arguments)};var t},clearError:C},S=a(29),k=a.n(S),O=k.a.clone({injectScript:"",injectFooter:"",debug:!1,twitterButton:!1});k.a.merge(O,{eth:{rpc:{url:"https://rinkeby.infura.io/pjvC14Kn4cv47X3U8qLq"},network:"rinkeby"},btc:{rpc:{username:"bitcoin",password:"local321",url:"https://liquality.io/bitcointestnetrpc/"},feeNumberOfBlocks:2,network:"bitcoin_testnet"},injectScript:"\n  // GA\n  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n  })(window,document,'script','dataLayer','GTM-52D86Z5');\n\n  // Router GA Pageview\n  const sendPageView = (path) => {\n    window.ga('set', 'page', path);\n    window.ga('send', 'pageview');\n  }\n\n  var pushState = history.pushState;\n  history.pushState = function () {\n    pushState.apply(history, arguments);\n    sendPageView(arguments[2])\n  };\n\n  window.onpopstate = function (e) {\n    sendPageView(document.location.pathname + document.location.search)\n  };\n\n  // HOTJAR\n  (function(h,o,t,j,a,r){\n    h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};\n    h._hjSettings={hjid:1102216,hjsv:6};\n    a=o.getElementsByTagName('head')[0];\n    r=o.createElement('script');r.async=1;\n    r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;\n    a.appendChild(r);\n  })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');\n  ",injectFooter:'<p style="text-align: center;">\n  <a href="https://liquality.io/terms-of-use" target="_blank">Terms of Use</a>\n  &nbsp;|&nbsp;\n  <a href="https://liquality.io/privacy-policy" target="_blank">Privacy Policy</a>\n  </p>'}),console.log(O);var _=O,j=a(15),N=j.providers.bitcoin.networks,T=j.providers.ethereum.networks,P=new j.Client;P.addProvider(new j.providers.ethereum.EthereumRPCProvider(localStorage.ethRpc||window.ethRpc||Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_ETH_RPC||_.eth.rpc.url)),"undefined"!==typeof web3&&P.addProvider(new j.providers.ethereum.EthereumMetaMaskProvider(web3.currentProvider,T[_.eth.network])),P.addProvider(new j.providers.ethereum.EthereumSwapProvider);var x=new j.Client;x.addProvider(new j.providers.bitcoin.BitcoreRPCProvider(localStorage.btcRpc||window.btcRpc||Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_BTC_RPC||_.btc.rpc.url,localStorage.btcRpcUser||window.btcRpcUser||Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_BTC_RPC_USER||_.btc.rpc.username,localStorage.btcRpcPass||window.btcRpcPass||Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_BTC_RPC_PASS||_.btc.rpc.password,_.btc.feeNumberOfBlocks)),x.addProvider(new j.providers.bitcoin.BitcoinLedgerProvider({network:N[_.btc.network]})),x.addProvider(new j.providers.bitcoin.BitcoinSwapProvider({network:N[_.btc.network]}));var A={eth:P,btc:x};function I(e){return A[e]}var L=a(9),W=a(17),R=a.n(W),B={SET_SECRET:"SET_SECRET",SET_SECRET_HASH:"SET_SECRET_HASH"};var H={setSecret:function(e){return{type:B.SET_SECRET,secret:e}},setSecretHash:function(e){return{type:B.SET_SECRET_HASH,secretHash:e}}},D=Object.freeze({INITIATION:"initiation",AGREEMENT:"agreement",CLAIMING:"claiming",SETTLED:"settled"}),F=[{id:D.INITIATION,label:"Swap initiation"},{id:D.AGREEMENT,label:"Counterparties agree"},{id:D.CLAIMING,label:"Claiming"},{id:D.SETTLED,label:"Settlement"}],M=function(e){return new Promise(function(t){return setTimeout(t,e)})},V={a:R.a.duration(12,"h"),b:R.a.duration(6,"h")};function G(e,t){var a,n,r;return"b"===t?(r=R()(e).subtract(V.b),n=V.b,a=R()(e).subtract(V.a)):(r=e,n=V.a,a=R()(e).subtract(V.a)),{start:a,duration:n,time:r}}function U(e,t){return G(e,"a"===t?"b":"a")}function $(){return R()().add(V.a)}var q=a(79),Y=a.n(q),K="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname);function X(e){var t,a,n,r,s,c,i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o){var l=e.assets;a=l.a,t=l.b,n=l.rate;var u=e.wallets;s=u.a,r=u.b;var p=e.transactions;i=p.a,c=p.b}else{var d=e.assets;t=d.a,a=d.b,n=d.rate;var m=e.wallets;r=m.a,s=m.b;var h=e.transactions;c=h.a,i=h.b}var f={ccy1:t.currency,ccy1v:t.value,ccy1Addr:o?e.counterParty[t.currency].address:r.addresses[0],ccy1CounterPartyAddr:o?r.addresses[0]:e.counterParty[t.currency].address,ccy2:a.currency,ccy2v:a.value,ccy2Addr:o?e.counterParty[a.currency].address:s.addresses[0],ccy2CounterPartyAddr:o?s.addresses[0]:e.counterParty[a.currency].address,ccy3v:n.value,aFundHash:c.fund.hash,bFundHash:i.fund.hash,aFundBlock:c.fund.block,bFundBlock:i.fund.block,secretHash:e.secretParams.secretHash,expiration:e.expiration.unix(),isPartyB:!0===o};return"".concat(K,"#").concat(Y.a.stringify(f))}function J(e){var t;if(e.hash){var a=Y.a.parse(e.hash.replace("#",""));return{assets:{a:{currency:a.ccy1,value:parseFloat(a.ccy1v)},b:{currency:a.ccy2,value:parseFloat(a.ccy2v)},rate:{value:parseFloat(a.ccy3v)}},wallets:{a:{addresses:[a.ccy1Addr]},b:{addresses:[a.ccy2Addr]}},counterParty:(t={},Object(L.a)(t,a.ccy1,{address:a.ccy1CounterPartyAddr}),Object(L.a)(t,a.ccy2,{address:a.ccy2CounterPartyAddr}),t),transactions:{a:{fund:{hash:a.aFundHash,block:a.aFundBlock},claim:{}},b:{fund:{hash:a.bFundHash,block:a.bFundBlock},claim:{}}},secretParams:{secretHash:a.secretHash},expiration:R.a.unix(a.expiration),isPartyB:"true"===a.isPartyB,link:e.href}}}var z=a(49),Z=a.n(z);var Q={update:function(e){var t=at.getState().swap.link,a=Z.a.get(t);if(a){var n=k.a.clone(a);k.a.merge(n,e),Z.a.set(t,n)}else Z.a.set(t,e)},get:function(){var e=at.getState().swap.link;return Z.a.get(e)}},ee={SET_TRANSACTION:"SET_TRANSACTION"};function te(e,t,a,n){return ae.apply(this,arguments)}function ae(){return(ae=Object(v.a)(w.a.mark(function e(t,a,n,r){var s,c;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=I(t.assets["a"===a?"b":"a"].currency),e.next=3,s.getSwapSecret(n.hash);case 3:c=e.sent,r(H.setSecret(c));case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ne(e,t,a){var n=D.INITIATION;e.a.fund.hash&&(n=D.AGREEMENT,e.b.fund.hash&&e.a.fund.confirmations>=0&&e.b.fund.confirmations>=0&&((e.b.claim.confirmations>=0||!t)&&(n=D.CLAIMING),e.a.claim.hash&&(n=D.SETTLED))),a(Te.setStep(n))}function re(e,t,a){if("/backupLink"!==t.pathname&&"/refund"!==t.pathname){var n=e.transactions.a.fund.hash&&e.transactions.a.fund.confirmations>0,r=!e.transactions.b.claim.hash||0===e.transactions.b.claim.confirmations,s=G(e.expiration,e.isPartyB?"b":"a").time,c=R()().isAfter(s);n&&r&&c?a(Object(h.replace)("/refund")):e.step===D.AGREEMENT&&"/waiting"!==t.pathname?e.isPartyB||e.transactions.b.fund.hash?a(Object(h.replace)("/waiting")):a(Object(h.replace)("/counterPartyLink")):e.step===D.CLAIMING?a(Object(h.replace)("/redeem")):e.step===D.SETTLED&&a(Object(h.replace)("/completed"))}}function se(e,t,a,n,r,s){return ce.apply(this,arguments)}function ce(){return(ce=Object(v.a)(w.a.mark(function e(t,a,n,r,s,c){var i,o,l;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0,"claim"===n?i=I(t.assets["a"===a?"b":"a"].currency):"fund"===n&&(i=I(t.assets[a].currency)),e.next=5,i.getTransactionByHash(r.hash);case 5:return o=e.sent,s({type:ee.SET_TRANSACTION,party:a,kind:n,tx:o}),ne((l=c()).swap.transactions,l.swap.isPartyB,s),re((l=c()).swap,l.router.location,s),e.next=13,M(5e3);case 13:e.next=0;break;case 15:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ie(e,t,a){return function(){var n=Object(v.a)(w.a.mark(function n(r,s){var c,i;return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r({type:ee.SET_TRANSACTION,party:e,kind:t,tx:a}),c=s().swap,"claim"!==t){n.next=5;break}return n.next=5,te(c,e,a,r);case 5:return(c=s().swap).link||(i=X(s().swap),r(Te.setLink(i))),c=s().swap,Q.update({transactions:Object(L.a)({},e,Object(L.a)({},t,{hash:a.hash}))}),n.next=11,se(c,e,t,a,r,s);case 11:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}()}var oe={setTransaction:ie,loadTransactions:function(){return e=Object(v.a)(w.a.mark(function e(t,a){var n,r,s;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=Q.get())&&n.transactions&&(r=n.transactions,["a.fund.hash","b.fund.hash","a.claim.hash","b.claim.hash"].forEach(function(e){if(k.a.has(r,e)){var a=e.split("."),n=a[0],s=a[1],c=k.a.get(r,e);t(ie(n,s,{hash:c}))}}),(s=a().swap).transactions.a.fund.hash&&!s.transactions.b.claim.hash&&t(Te.waitForSwapClaim()));case 2:case"end":return e.stop()}},e,this)})),function(t,a){return e.apply(this,arguments)};var e}},le=a(111),ue=a.n(le),pe=a(112),de=a.n(pe),me=a(50),he=a.n(me),fe={btc:{name:"Bitcoin",icon:ue.a,code:"BTC",isValidAddress:function(e){return/^[13mn][a-km-zA-HJ-NP-Z1-9]{25,34}$/.test(e)},unitToCurrency:function(e){return he()(e).dividedBy(1e8).toNumber()},currencyToUnit:function(e){return he()(e).times(1e8).toNumber()}},eth:{name:"Ethereum",icon:de.a,code:"ETH",isValidAddress:function(e){return/^(0x)?[0-9a-fA-F]{40}$/.test(e)},unitToCurrency:function(e){return he()(e).dividedBy(1e18).toNumber()},currencyToUnit:function(e){return he()(e).times(1e18).toNumber()}}},be={SWITCH_SIDES:"SWITCH_SIDES",SET_STEP:"SET_STEP",SET_EXPIRATION:"SET_EXPIRATION",SET_LINK:"SET_LINK",SET_IS_VERIFIED:"SET_IS_VERIFIED"};function ye(e){return{type:be.SET_EXPIRATION,expiration:e}}function we(e){return{type:be.SET_IS_VERIFIED,isVerified:e}}function ve(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(v.a)(w.a.mark(function e(t,a){var n,r,s,c,i,o,l,u;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a().swap,r=n.secretParams,s=n.assets,c=n.wallets,i=n.counterParty,n.isPartyB||r.secret){e.next=8;break}return o=I(s.a.currency),l="".concat(s.a.value).concat(s.a.currency).concat(s.b.value).concat(s.b.currency).concat(c.a.addresses[0]).concat(i[s.a.currency].address).concat(c.b.addresses[0]).concat(i[s.b.currency].address),e.next=6,o.generateSecret(l);case 6:u=e.sent,t(H.setSecret(u));case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ce(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Object(v.a)(w.a.mark(function e(t,a){var n,r,s,c,i,o,l,u,p,d,m,h,f;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().swap,r=n.assets,s=n.wallets,c=n.counterParty,i=n.secretParams,o=n.expiration,l=n.isPartyB,u=I(r.a.currency),l?p=G(o,"b").time:(p=$(),t(ye(p))),e.next=5,u.getBlockHeight();case 5:return d=e.sent,m=fe[r.a.currency].currencyToUnit(r.a.value),h=[m,c[r.a.currency].address,s.a.addresses[0],i.secretHash,p.unix()],_.debug&&console.log("Initiating Swap",h),e.next=11,u.initiateSwap.apply(u,h);case 11:f=e.sent,t(oe.setTransaction("a","fund",{hash:f,block:d}));case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Se(){return(Se=Object(v.a)(w.a.mark(function e(t,a){var n,r,s,c,i,o,l,u,p,d,m;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a().swap,r=n.assets.b,s=r.currency,c=r.value,i=n.wallets.b.addresses,o=n.counterParty,l=n.secretParams,u=n.transactions,p=n.expiration,d=I(s),m=fe[s].currencyToUnit(c);case 3:return e.prev=4,e.next=7,d.verifyInitiateSwapTransaction(u.b.fund.hash,m,i[0],o[s].address,l.secretHash,p.unix());case 7:if(!e.sent){e.next=11;break}return t(we(!0)),e.abrupt("break",20);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0);case 16:return e.next=18,M(5e3);case 18:e.next=3;break;case 20:case"end":return e.stop()}},e,this,[[4,13]])}))).apply(this,arguments)}function ke(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(v.a)(w.a.mark(function e(t,a){var n,r,s,c,i,o,l,u,p,d,m,h;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().swap,r=n.assets.b,s=r.currency,c=r.value,i=n.wallets.b.addresses,o=n.counterParty,l=n.secretParams,u=n.expiration,p=I(s),d=fe[s].currencyToUnit(c),m=G(u,"b").time,e.next=6,p.findInitiateSwapTransaction(d,i[0],o[s].address,l.secretHash,m.unix());case 6:h=e.sent,t(oe.setTransaction("b","fund",h));case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _e(){return function(){var e=Object(v.a)(w.a.mark(function e(t,a){var n,r,s,c,i,o,l,u,p,d,m;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().swap,r=n.assets,s=n.wallets,c=n.transactions,i=n.counterParty,o=n.secretParams,l=n.expiration,u=n.isPartyB,p=I(r.a.currency),d=G(l,u?"b":"a").time,e.next=5,p.findClaimSwapTransaction(c.a.fund.hash,i[r.a.currency].address,s.a.addresses[0],o.secretHash,d.unix());case 5:m=e.sent,t(oe.setTransaction("b","claim",m));case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}function je(e,t){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(v.a)(w.a.mark(function e(t,a){var n,r,s,c,i,o,l,u,p,d,m,h,f;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().swap,r=n.assets,s=n.wallets,c=n.counterParty,i=n.transactions,o=n.secretParams,l=n.isPartyB,u=n.expiration,p=I(r.b.currency),e.next=4,p.getBlockHeight();case 4:return d=e.sent,m=U(u,l?"b":"a").time,h=[i.b.fund.hash,s.b.addresses[0],c[r.b.currency].address,o.secret,m.unix()],_.debug&&console.log("Claiming Swap",h),e.next=10,p.claimSwap.apply(p,h);case 10:f=e.sent,t(oe.setTransaction("a","claim",{hash:f,block:d}));case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Te={switchSides:function(){return{type:be.SWITCH_SIDES}},setStep:function(e){return{type:be.SET_STEP,step:e}},setExpiration:ye,setLink:function(e){return{type:be.SET_LINK,link:e}},setIsVerified:we,initiateSwap:function(){return e=Object(v.a)(w.a.mark(function e(t,a){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t,a);case 2:return e.next=4,Ce(t,a);case 4:t(we(!0)),t(Object(h.replace)("/backupLink"));case 6:case"end":return e.stop()}},e,this)})),function(t,a){return e.apply(this,arguments)};var e},confirmSwap:function(){return e=Object(v.a)(w.a.mark(function e(t,a){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(t,a);case 2:t(_e()),t(Object(h.replace)("/backupLink"));case 4:case"end":return e.stop()}},e,this)})),function(t,a){return e.apply(this,arguments)};var e},findInitiateSwapTransaction:ke,verifyInitiateSwapTransaction:function(e,t){return Se.apply(this,arguments)},waitForSwapConfirmation:function(){return e=Object(v.a)(w.a.mark(function e(t,a){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(h.replace)("/waiting")),e.next=3,ke(t,a);case 3:case"end":return e.stop()}},e,this)})),function(t,a){return e.apply(this,arguments)};var e},waitForSwapClaim:_e,redeemSwap:function(){return e=Object(v.a)(w.a.mark(function e(t,a){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t,a);case 2:return e.next=4,je(t,a);case 4:case"end":return e.stop()}},e,this)})),function(t,a){return e.apply(this,arguments)};var e},refundSwap:function(){return e=Object(v.a)(w.a.mark(function e(t,a){var n,r,s,c,i,o,l,u,p,d;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().swap,r=n.assets,s=n.wallets,c=n.counterParty,i=n.transactions,o=n.secretParams,l=n.isPartyB,u=n.expiration,p=I(r.a.currency),d=G(u,l?"b":"a").time,e.next=5,p.refundSwap(i.a.fund.hash,c[r.a.currency].address,s.a.addresses[0],o.secretHash,d.unix());case 5:case"end":return e.stop()}},e,this)})),function(t,a){return e.apply(this,arguments)};var e}},Pe=a(20),xe=a.n(Pe),Ae={CHANGE_AMOUNT:"CHANGE_AMOUNT"};var Ie,Le={changeAmount:function(e,t){return function(a,n){a({type:Ae.CHANGE_AMOUNT,party:e,newValue:t});var r=n().swap.assets,s={type:"a",value:r.a.value||0},c={type:"b",value:r.b.value||0},i={type:"rate",value:r.rate.value||0};if("a"===e||"rate"===e){var o=+(parseFloat(s.value)*parseFloat(i.value)).toFixed(6);a({type:Ae.CHANGE_AMOUNT,party:"b",newValue:o.toString()})}else if("b"===e)if(0===s.value){var l=+(parseFloat(c.value)*parseFloat(i.value)).toFixed(6);a({type:Ae.CHANGE_AMOUNT,party:"a",newValue:l.toString()})}else{var u=+(parseFloat(c.value)/parseFloat(s.value)).toFixed(6);a({type:Ae.CHANGE_AMOUNT,party:"rate",newValue:u.toString()})}}}};function We(e,t,a){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0,s=e[r.type];return s?s(n,r):a?a(n,r):n}}var Re=We((Ie={},Object(L.a)(Ie,be.SWITCH_SIDES,function(e,t){var a=+(parseFloat(e.b.value)/parseFloat(e.a.value)).toFixed(6);return xe()(e,{a:{$set:e.b},b:{$set:e.a},rate:{$set:{value:a.toString()}}})}),Object(L.a)(Ie,Ae.CHANGE_AMOUNT,function(e,t){return xe()(e,Object(L.a)({},t.party,{value:{$set:t.newValue}}))}),Ie),{a:{currency:"eth",value:""},b:{currency:"btc",value:""},rate:{value:""}}),Be=a(64),He={TOGGLE_WALLET_CONNECT:"TOGGLE_WALLET_CONNECT",CHOOSE_WALLET:"CHOOSE_WALLET",CONNECT_WALLET:"CONNECT_WALLET",DISCONNECT_WALLET:"DISCONNECT_WALLET"};function De(e,t){return{type:He.CHOOSE_WALLET,party:e,wallet:t}}function Fe(e,t,a){return{type:He.CONNECT_WALLET,party:e,addresses:t,balance:a}}var Me,Ve={waitForWallet:function(e,t,a){return n=Object(v.a)(w.a.mark(function t(n,r){var s,c,i,o,l,u,p,d,m,h,f,b,y,v;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=r().swap,c=s.assets,i=s.wallets,o=s.isPartyB,l=c[e].currency,u=I(l),"eth"===l&&window.ethereum.enable(),n(De(e,a)),p=100,t.next=8,u.getUnusedAddress();case 8:return d=t.sent,t.next=11,u.getUsedAddresses(p);case 11:return m=t.sent,m=Object(Be.a)(new Set([d].concat(Object(Be.a)(m)).map(function(e){return e.address}))),o&&(h=i[e].addresses[0],m.includes(h)&&(m=[h].concat(Object(Be.a)(m.filter(function(e){return e!==h}))))),t.next=16,u.getBalance(m);case 16:f=t.sent,b=fe[l].unitToCurrency(f).toFixed(6),y="a"===e?"b":"a",v=r().swap.assets[e].currency===l?e:y,n(Fe(v,m,b));case 21:case"end":return t.stop()}},t,this)})),function(e,t){return n.apply(this,arguments)};var n},toggleWalletConnect:function(e,t){return{type:He.TOGGLE_WALLET_CONNECT,party:e,target:t}},chooseWallet:De,connectWallet:Fe,disconnectWallet:function(e){return{type:He.DISCONNECT_WALLET,party:e}}};var Ge=We((Me={},Object(L.a)(Me,be.SWITCH_SIDES,function(e,t){return xe()(e,{a:{$set:e.b},b:{$set:e.a}})}),Object(L.a)(Me,He.TOGGLE_WALLET_CONNECT,function(e,t){return xe()(e,Object(L.a)({},t.party,{connectOpen:{$set:!e[t.party].connectOpen},anchorEl:{$set:t.target}}))}),Object(L.a)(Me,He.CHOOSE_WALLET,function(e,t){return xe()(e,Object(L.a)({},t.party,{chosen:{$set:!0},type:{$set:t.wallet}}))}),Object(L.a)(Me,He.CONNECT_WALLET,function(e,t){return xe()(e,Object(L.a)({},t.party,{addresses:{$set:t.addresses},connected:{$set:!0},balance:{$set:t.balance}}))}),Object(L.a)(Me,He.DISCONNECT_WALLET,function(e,t){return xe()(e,Object(L.a)({},t.party,{addresses:{$set:[]},connected:{$set:!1},chosen:{$set:!1},type:{$set:""}}))}),Me),{a:{addresses:[],balance:null,connectOpen:!1,connected:!1,chosen:!1,type:""},b:{addresses:[],balance:null,connectOpen:!1,connected:!1,chosen:!1,type:""}}),Ue={CHANGE_COUNTER_PARTY_ADDRESS:"CHANGE_COUNTER_PARTY_ADDRESS"};var $e={changeCounterPartyAddress:function(e,t,a){return"eth"===e&&(t=(t=t.replace("0x","")).toLowerCase()),{type:Ue.CHANGE_COUNTER_PARTY_ADDRESS,currency:e,newValue:t,valid:a}}};var qe=We(Object(L.a)({},Ue.CHANGE_COUNTER_PARTY_ADDRESS,function(e,t){return xe()(e,Object(L.a)({},t.currency,{address:{$set:t.newValue},valid:{$set:t.valid}}))}),{eth:{address:"",valid:!1},btc:{address:"",valid:!1}}),Ye=a(61);var Ke,Xe=We(Object(L.a)({},ee.SET_TRANSACTION,function(e,t){return xe()(e,Object(L.a)({},t.party,Object(L.a)({},t.kind,{$set:Object(Ye.a)({confirmations:0},t.tx)})))}),{a:{fund:{},claim:{}},b:{fund:{},claim:{}}});var Je=We((Ke={},Object(L.a)(Ke,B.SET_SECRET,function(e,t){return xe()(e,{secret:{$set:t.secret},secretHash:{$set:j.crypto.sha256(t.secret)}})}),Object(L.a)(Ke,B.SET_SECRET_HASH,function(e,t){return xe()(e,{secretHash:{$set:t.secretHash}})}),Ke),{}),ze=Object(f.c)({assets:Re,wallets:Ge,counterParty:qe,transactions:Xe,secretParams:Je,step:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.INITIATION,t=arguments.length>1?arguments[1]:void 0;return t.type===be.SET_STEP?t.step:e},expiration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===be.SET_EXPIRATION?t.expiration:e},link:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===be.SET_LINK?t.link:e},isVerified:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===be.SET_IS_VERIFIED?t.isVerified:e},isPartyB:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}),Ze=Object(f.c)({swap:ze,error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===E.SET_ERROR?t.error:e}}),Qe=a(23),et=Object(Qe.a)({basename:window.location.pathname}),tt={swap:J(window.location)},at=Object(f.d)(Object(h.connectRouter)(et)(Ze),tt,Object(f.a)(b.a,Object(h.routerMiddleware)(et)));var nt=function(e){if(!(e instanceof j.errors.WalletError||e instanceof j.errors.NodeError))throw e;at.dispatch(g.setError(e))},rt=a(413),st=a(24),ct=a(412),it=a(113),ot=a.n(it),lt=(a(258),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={clickDisabled:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onClickHandler",value:function(e){var t=this;this.props.loadingAfterClickMessage&&(this.setState({clickDisabled:!0}),this.timeout=setTimeout(function(){t.setState({clickDisabled:!1})},2e4)),this.props.onClick(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=["Button","btn"];this.props.className&&t.push(this.props.className),this.props.primary?t.push("btn-primary"):this.props.secondary?t.push("btn-secondary"):this.props.link&&t.push("btn-link"),this.props.wide&&t.push("Button_wide"),this.props.small&&t.push("Button_small");var a=this.props.loadingAfterClick&&this.state.clickDisabled,n=this.state.clickDisabled||this.props.disabled;return s.a.createElement("button",{tabIndex:this.props.tabIndex,className:t.join(" "),disabled:n,onClick:function(t){return e.onClickHandler(t)}},this.props.icon&&s.a.createElement("span",{className:"Button_icon"},s.a.createElement("img",{src:this.props.icon,alt:""})),a&&s.a.createElement("img",{className:"Button_spinner",src:ot.a,alt:"Loading..."}),this.props.loadingAfterClickMessage&&this.state.clickDisabled?this.props.loadingAfterClickMessage:this.props.children)}}]),t}(r.Component));lt.defaultProps={tabIndex:-1};var ut=lt,pt=a(114),dt=a.n(pt),mt=a(115),ht=a.n(mt),ft=a(116),bt=a.n(ft),yt={metamask:{icon:dt.a,name:"MetaMask"},ledger:{icon:ht.a,name:"Ledger"},ledger_purple:{icon:bt.a}},wt=a(117),vt=a.n(wt),Et=(a(260),function(e){return s.a.createElement("div",{className:"WalletDisplay"},s.a.createElement("img",{className:"WalletDisplay_icon",src:yt[e.type]?yt[e.type].icon:vt.a,alt:yt[e.type]?yt[e.type].name:"Wallet"}),s.a.createElement("p",{className:"WalletDisplay_address"},e.address&&e.address),e.connected?s.a.createElement(ut,{tabIndex:-1,small:!0,secondary:!0,onClick:function(t){return e.onButtonClick(t)}},"Change wallet"):s.a.createElement(ut,{tabIndex:-1,small:!0,primary:!0,onClick:function(t){return e.onButtonClick(t)}},"Connect wallet"),e.balance&&s.a.createElement("div",null,s.a.createElement("p",null,"Spendable"),s.a.createElement("p",{className:"WalletDisplay_balance"},e.balance," ",fe[e.currency].code)))}),Ct=a(48),gt=a.n(Ct),St={btc:j.providers.bitcoin.networks,eth:j.providers.ethereum.networks};a(262);var kt=function(e){var t,a,n=(t=e.currency,a=_[t].network,St[t][a]);return s.a.createElement("div",{className:"WalletChoose"},s.a.createElement("h1",null,e.title),e.subTitle&&s.a.createElement("p",null,e.subTitle),s.a.createElement("h2",null,"Pay with ",e.currency.toUpperCase()),e.wallets.map(function(t){return s.a.createElement("div",{key:t},s.a.createElement("div",{className:"WalletChoose_wallet"},n&&n.isTestnet&&s.a.createElement("p",null,"Testnet only"),s.a.createElement("img",{src:yt[t].icon,className:"WalletPanel_walletImg",alt:"".concat(yt[t].name," Icon")}),s.a.createElement("h5",null,yt[t].name),s.a.createElement("p",null,s.a.createElement("a",{href:"#troubleconnecting"},"Trouble connecting?"))),s.a.createElement(ut,{wide:!0,primary:!0,onClick:function(){return e.chooseWallet(t)}},"Connect"),s.a.createElement(ut,{wide:!0,link:!0,onClick:e.onCancel},"Cancel"))}))},Ot=(a(264),function(e){return s.a.createElement("div",{className:"WalletConnecting"},s.a.createElement("h2",null,"eth"===e.currency?"Login to MetaMask":"To confirm"),"btc"===e.currency&&s.a.createElement("p",null,"Navigate to your Bitcoin account"),s.a.createElement("div",{className:"WalletConnecting_wallet"},s.a.createElement("img",{src:yt[e.wallet].icon,className:"WalletPanel_walletImg",alt:"".concat(yt[e.wallet].name," Icon")}),s.a.createElement("h5",null,yt[e.wallet].name)),"ledger"===e.wallet&&s.a.createElement("div",{className:"WalletConnecting_ledger"},s.a.createElement("img",{src:yt[e.wallet+"_purple"].icon,alt:"Ledger Icon"}),s.a.createElement("div",{className:"WalletConnecting_ledgerPin"},s.a.createElement("p",null,"Insert Ledger Pin"))),s.a.createElement(ut,{wide:!0,primary:!0,onClick:e.cancelWallet},e.cancelText))});a(266);var _t=function(e){return s.a.createElement("div",{className:"WalletConnected"},s.a.createElement("h2",null,yt[e.wallet].name," Connected"),s.a.createElement("div",{className:"WalletConnected_wallet"},s.a.createElement("img",{src:yt[e.wallet].icon,className:"WalletPanel_walletImg",alt:"".concat(yt[e.wallet].name," Icon")}),s.a.createElement("h5",null,yt[e.wallet].name),s.a.createElement("p",null,(t=e.addresses[0],"".concat(t.substring(0,6),"...").concat(t.substring(t.length-6))))),s.a.createElement(ut,{wide:!0,primary:!0,onClick:e.onOk},"OK"),s.a.createElement(ut,{wide:!0,link:!0,onClick:e.disconnectWallet},e.disconnectText));var t},jt={btc:{ledger:{multiAddress:!0,connectTitle:"Plug in and enter",connectSubtitle:""}},eth:{metamask:{multiAddress:!1,connectTitle:"Login to MetaMask",connectSubtitle:""},ledger:{multiAddress:!0,connectTitle:"Plug in and enter",connectSubtitle:"Choose ethereum application and enable smart contract support"}}},Nt=(a(268),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).chooseWallet=a.chooseWallet.bind(Object(st.a)(Object(st.a)(a))),a.disconnectWallet=a.disconnectWallet.bind(Object(st.a)(Object(st.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"chooseWallet",value:function(e){var t=this.props,a=t.id,n=t.currency;this.props.chooseWallet(a,n,e)}},{key:"disconnectWallet",value:function(){var e=this.props.id;this.props.disconnectWallet(e)}},{key:"render",value:function(){var e,t=this.props;return e=t.walletConnected?s.a.createElement(_t,{addresses:t.addresses,currency:t.currency,disconnectText:"Disconnect",disconnectWallet:this.disconnectWallet,onOk:this.props.handleClose,wallet:t.wallet}):t.walletChosen?s.a.createElement(Ot,{title:jt[t.currency][t.wallet].connectTitle,subtitle:jt[t.currency][t.wallet].connectSubtitle,cancelText:"Cancel",cancelWallet:this.disconnectWallet,currency:t.currency,wallet:t.wallet}):s.a.createElement(kt,{title:"Liquality",subTitle:"",wallets:"eth"===t.currency?["metamask"]:["ledger"],chooseWallet:this.chooseWallet,onCancel:this.props.handleClose,currency:t.currency}),s.a.createElement("div",null,s.a.createElement(gt.a,{id:t.id,open:t.open,onClose:t.handleClose},s.a.createElement("div",{className:"WalletConnectModal"},s.a.createElement("div",{className:"WalletConnectModal_body"},e))))}}]),t}(r.Component));Nt.defaultProps={open:!1};var Tt=Nt,Pt=(a(352),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.assets,a=t.a,n=t.b,r=this.props.wallets,c=r.a,i=r.b;return s.a.createElement("div",{className:"WalletPanel"},s.a.createElement("div",{className:"row justify-content-between no-gutters"},s.a.createElement("div",{className:"col WalletPanel_left"},s.a.createElement(Et,{currency:a.currency,type:c.type,balance:c.balance,address:c.addresses[0],connected:c.connected,onButtonClick:function(t){return e.props.onToggleWalletConnect("a",t.currentTarget)}})),s.a.createElement("div",{className:"col WalletPanel_right"},s.a.createElement(Et,{currency:n.currency,type:i.type,balance:i.balance,address:i.addresses[0],connected:i.connected,onButtonClick:function(t){return e.props.onToggleWalletConnect("b",t.currentTarget)}}))),s.a.createElement(Tt,{open:c.connectOpen,currency:a.currency,id:"a",walletChosen:c.chosen,wallet:c.type,chooseWallet:this.props.waitForWallet,disconnectWallet:this.props.onWalletDisconnected,anchorEl:c.anchorEl,addresses:c.addresses,walletConnected:c.connected,handleClose:function(t){return e.props.onToggleWalletConnect("a",t.currentTarget)}}),s.a.createElement(Tt,{open:i.connectOpen,currency:n.currency,id:"b",walletChosen:i.chosen,wallet:i.type,chooseWallet:this.props.waitForWallet,disconnectWallet:this.props.onWalletDisconnected,anchorEl:i.anchorEl,addresses:i.addresses,walletConnected:i.connected,handleClose:function(t){return e.props.onToggleWalletConnect("b",t.currentTarget)}}))}}]),t}(r.Component)),xt=Object(m.connect)(function(e){return{assets:e.swap.assets,wallets:e.swap.wallets,isPartyB:e.swap.isPartyB}},{onToggleWalletConnect:Ve.toggleWalletConnect,waitForWallet:Ve.waitForWallet,onWalletConnected:Ve.connectWallet,onWalletDisconnected:Ve.disconnectWallet})(Pt),At=a(118),It=a.n(At),Lt=(a(354),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"SwapPairPanel"},s.a.createElement("div",{className:"SwapPairPanel_assetContainer"},s.a.createElement("img",{src:fe[this.props.haveCurrency].icon,className:"SwapPairPanel_asset SwapPairPanel_asset_left",alt:this.props.haveCurrency}),s.a.createElement("img",{src:fe[this.props.wantCurrency].icon,className:"SwapPairPanel_asset SwapPairPanel_asset_right",alt:this.props.haveCurrency}),s.a.createElement("img",{src:It.a,className:"SwapPairPanel_assetsBG",alt:""}),this.props.icon&&s.a.createElement("img",{src:this.props.icon,className:"SwapPairPanel_icon",onClick:function(t){return e.props.onIconClick(t)},alt:""})),s.a.createElement("div",{className:"SwapPairPanel_labels"},s.a.createElement("h1",{className:"SwapPairPanel_labels_have"},this.props.haveLabel),s.a.createElement("h1",{className:"SwapPairPanel_labels_want"},this.props.wantLabel)))}}]),t}(r.Component));Lt.defaultProps={haveLabel:"Have",wantLabel:"Want"};var Wt=Lt,Rt=(a(356),function(e){return s.a.createElement("div",{className:"CurrencyInput"},s.a.createElement("h3",{className:"CurrencyInput_heading"},fe[e.currency].code),s.a.createElement("input",{type:"number",readOnly:e.disabled,value:e.value,className:"CurrencyInput_input",placeholder:"0.00",onChange:function(t){return e.onChange(t.target.value)},tabIndex:e.tabIndex}))});Rt.defaultProps={tabIndex:-1};var Bt=Rt,Ht=(a(358),function(e){return s.a.createElement("div",{className:"Rate"},s.a.createElement("h5",{className:"Rate_heading"},"Rate"),s.a.createElement("h5",{className:"Rate_stable"},s.a.createElement("strong",null,"1 ",fe[e.currencyA].code)),s.a.createElement("h4",{className:"Rate_equal"},"="),s.a.createElement("h6",null,s.a.createElement("input",{tabIndex:e.tabIndex,type:"number",readOnly:e.disabled,value:e.value,className:"Rate_input",placeholder:"0.0000",onChange:function(t){return e.onChange(t.target.value)}}),fe[e.currencyB].code))});Ht.defaultProps={value:0,tabIndex:-1};var Dt=Ht,Ft=(a(360),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.assets,a=t.a,n=t.b,r=t.rate;return s.a.createElement("div",{className:"CurrencyInputs"},s.a.createElement("div",{className:"row justify-content-between no-gutters"},s.a.createElement("div",{className:"col CurrencyInputs_left"},s.a.createElement(Bt,{currency:a.currency,value:a.value,disabled:this.props.disabled,onChange:function(t){return e.props.onAmountChange("a",t)},tabIndex:1})),s.a.createElement("div",{className:"col CurrencyInputs_right"},s.a.createElement(Bt,{currency:n.currency,value:n.value,disabled:this.props.disabled,onChange:function(t){return e.props.onAmountChange("b",t)},tabIndex:3})),this.props.showRate&&s.a.createElement("div",{className:"CurrencyInputs_centre"},s.a.createElement(Dt,{currencyA:a.currency,currencyB:n.currency,value:r.value,disabled:this.props.disabled,onChange:function(t){return e.props.onAmountChange("rate",t)},tabIndex:2}))))}}]),t}(r.Component)),Mt=Object(m.connect)(function(e,t){return{assets:e.swap.assets,disabled:t.disabled}},{onSwitchSides:Te.switchSides,onAmountChange:Le.changeAmount})(Ft),Vt=(a(362),a(119)),Gt=a.n(Vt),Ut=a(120),$t=a.n(Ut),qt=function(e){var t,a="",n=!1;return""!==e.value&&((n=fe[e.currency].isValidAddress(e.value))?a="AddressInput_box_valid":(t="Invalid Address",a="AddressInput_box_invalid")),s.a.createElement("div",{className:"AddressInput"},s.a.createElement("div",{className:"AddressInput_wrapper"},s.a.createElement("div",{className:"AddressInput_box "+a},s.a.createElement("img",{className:"AddressInput_icon",src:fe[e.currency].icon,alt:fe[e.currency].name}),s.a.createElement("input",{className:"AddressInput_input",tabIndex:e.tabIndex,value:e.value,onChange:function(t){return e.onChange(t.target.value,fe[e.currency].isValidAddress(t.target.value))}})),s.a.createElement("img",{className:"AddressInput_status",src:n?Gt.a:$t.a,alt:n?"Valid":"Invalid"})),s.a.createElement("div",{className:"AddressInput_message"},t))};qt.defaultProps={tabIndex:-1};var Yt=qt,Kt=(a(364),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.assets,a=t.a,n=t.b,r=this.props.counterParty;return s.a.createElement("div",{className:"CounterPartyWallets"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement("h5",{className:"CounterPartyWallets_heading"},"Receive From"),s.a.createElement(Yt,{currency:n.currency,value:r[n.currency].address,onChange:function(t,a){return e.props.onCounterPartyAddressChange(n.currency,t,a)},tabIndex:4})),s.a.createElement("div",{className:"col"},s.a.createElement("h5",{className:"CounterPartyWallets_heading"},"Send To"),s.a.createElement(Yt,{currency:a.currency,value:r[a.currency].address,onChange:function(t,n){return e.props.onCounterPartyAddressChange(a.currency,t,n)},tabIndex:5}))))}}]),t}(r.Component)),Xt=Object(m.connect)(function(e){return{assets:e.swap.assets,counterParty:e.swap.counterParty}},{onCounterPartyAddressChange:$e.changeCounterPartyAddress})(Kt),Jt=a(121),zt=a.n(Jt),Zt=a(62),Qt=a.n(Zt),ea=(a(366),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={expiration:$()},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){e.setState({expiration:$()})},5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return s.a.createElement("div",{className:"InitiatorExpirationInfo"},s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("div",null,s.a.createElement("img",{src:zt.a,className:"InitiatorExpirationInfo_icon",alt:"Lock Icon"}),"Funds Locked ",V.a.asHours().toFixed(2)," HRS"),s.a.createElement("div",null,s.a.createElement("img",{src:Qt.a,className:"InitiatorExpirationInfo_icon",alt:"Clock Icon"}),"Offer Active ",V.b.asHours().toFixed(2)," HRS"),s.a.createElement("div",null,s.a.createElement("strong",null,"~ ",this.state.expiration.format("D/M/YY HH:mm")))))}}]),t}(r.Component)),ta=Object(m.connect)(function(e){return{}},{refundSwap:Te.refundSwap})(ea);var aa=function(e){return function(t){function a(){return Object(o.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(d.a)(a,t),Object(l.a)(a,[{key:"handleCopyClick",value:function(){var e=document.createElement("input");e.value=this.props.link,e.style="position: absolute; top: -2000px;",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},{key:"render",value:function(){var t=this;return s.a.createElement(e,Object.assign({onCopyClick:function(){return t.handleCopyClick()}},this.props))}}]),a}(s.a.Component)},na=a(44),ra=a.n(na),sa=(a(368),aa(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state=a.getExpirationState(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getTransaction",value:function(){var e=this.props.transactions,t=[e.b.claim,e.a.claim];return this.props.isPartyB?t.push(e.a.fund,e.b.fund):t.push(e.b.fund,e.a.fund),t.find(function(e){return e.hash})||{}}},{key:"getExpirationState",value:function(){var e=this.props.isPartyB?"b":"a",t=U(this.props.expiration,e);return{start:t.start,duration:t.duration,expiration:t.time,now:R()(),transaction:this.getTransaction()}}},{key:"componentDidMount",value:function(){this.interval=setInterval(this.tick.bind(this),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"tick",value:function(){this.setState(this.getExpirationState())}},{key:"render",value:function(){var e=this,t=this.state.now.isAfter(this.state.expiration)?this.state.expiration:this.state.now,a=R.a.duration(this.state.expiration.diff(t)),n=R.a.duration(t.diff(this.state.start)),r=this.state.duration,c=((r.asSeconds()-a.asSeconds())/r.asSeconds()*100).toFixed(2);return s.a.createElement("div",{className:"ExpirationDetails"},s.a.createElement("img",{src:Qt.a,className:"ExpirationDetails_clock",alt:"Clock Icon"}),s.a.createElement("div",{className:"ExpirationDetails_passed"},R.a.utc(n.asMilliseconds()).format("HH:mm"),"hr"),s.a.createElement("div",{className:"ExpirationDetails_center"},s.a.createElement("div",{className:"ExpirationDetails_top"},s.a.createElement("div",{className:"ExpirationDetails_terms"},s.a.createElement("em",null,"Get ",this.props.assets.b.value," ",fe[this.props.assets.b.currency].code,"\xa0for ",this.props.assets.a.value," ",fe[this.props.assets.a.currency].code),"\xa0Active for ",R.a.utc(a.asMilliseconds()).format("HH:mm"),"hr ",this.state.expiration.format("D/M/Y HH:mm")),s.a.createElement("div",{className:"ExpirationDetails_link"},s.a.createElement("a",{href:"#copy",onClick:function(){return e.props.onCopyClick()}},"Swap link",s.a.createElement("img",{src:ra.a,alt:"Copy"})))),s.a.createElement("div",{className:"ExpirationDetails_progress"},s.a.createElement("div",{className:"ExpirationDetails_progress_fill",style:{width:"".concat(c,"%")}})),s.a.createElement("div",{className:"ExpirationDetails_bottom"},s.a.createElement("div",{className:"ExpirationDetails_transaction"},s.a.createElement("strong",null,"Transaction ID: ")," ",this.state.transaction.hash),s.a.createElement("div",{className:"ExpirationDetails_confirmations"},"Confirmations: ",this.state.transaction.confirmations))),s.a.createElement("div",{className:"ExpirationDetails_left"},R.a.utc(a.asMilliseconds()).format("HH:mm"),"hr"))}}]),t}(r.Component))),ca=Object(m.connect)(function(e,t){return Object(Ye.a)({expiration:e.swap.expiration,isPartyB:e.swap.isPartyB,assets:e.swap.assets,transactions:e.swap.transactions,link:e.swap.link,step:e.swap.step},t)},{})(sa),ia=a(63),oa=a.n(ia),la=a(122),ua=a.n(la),pa=(a(370),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"walletsValid",value:function(){var e=J(window.location);return this.props.wallets.a.addresses.includes(e.wallets.a.addresses[0])&&this.props.wallets.b.addresses.includes(e.wallets.b.addresses[0])}},{key:"walletsConnected",value:function(){return this.props.wallets.a.connected&&this.props.wallets.b.connected}},{key:"counterPartyAddressesValid",value:function(){return this.props.counterParty[this.props.assets.a.currency].valid&&this.props.counterParty[this.props.assets.b.currency].valid}},{key:"initiationExists",value:function(){return this.props.isVerified&&this.props.transactions.b.fund.hash}},{key:"initiationConfirmed",value:function(){return this.props.isVerified&&this.props.transactions.b.fund.confirmations>=0}},{key:"nextEnabled",value:function(){return 0===this.getErrors().length}},{key:"amountsValid",value:function(){return parseFloat(this.props.assets.a.value)>0&&parseFloat(this.props.assets.a.value)<=parseFloat(this.props.wallets.a.balance)&&parseFloat(this.props.assets.b.value)>0&&parseFloat(this.props.assets.b.value)<=parseFloat(this.props.wallets.b.balance)}},{key:"getErrors",value:function(){var e=[];return this.amountsValid()||e.push("Amounts are incorrect"),this.walletsConnected()||e.push("Wallets are not connected"),this.props.isPartyB?(this.walletsValid()||e.push("The connected wallets must match the wallets supplied for the swap"),this.initiationExists()||e.push("Counterparty hasn't initiated"),this.initiationConfirmed()||e.push("Counterparty has initiated, awaiting confirmations")):this.counterPartyAddressesValid()||e.push("Invalid counterparty addresses"),e}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"SwapInitiation"},s.a.createElement(Wt,{haveCurrency:this.props.assets.a.currency,wantCurrency:this.props.assets.b.currency,icon:this.props.isPartyB?void 0:ua.a,onIconClick:function(){return e.props.switchSides()}}),s.a.createElement("div",{className:"SwapInitiation_top"},s.a.createElement(Mt,{disabled:this.props.isPartyB,showRate:!0})),s.a.createElement(xt,null),s.a.createElement("div",{className:"SwapInitiation_bottom"},this.props.isPartyB?s.a.createElement("span",{className:"SwapInitiation_handshake"},s.a.createElement("img",{src:oa.a,alt:"Agree"})):s.a.createElement("h5",{className:"SwapInitiation_counterPartyLabel"},"Counter party wallets"),this.props.isPartyB||s.a.createElement(Xt,null),this.props.isPartyB?s.a.createElement(ca,null):s.a.createElement(ta,null),!this.props.isPartyB&&s.a.createElement(ut,{wide:!0,primary:!0,disabled:!this.nextEnabled(),loadingAfterClick:!0,loadingAfterClickMessage:"Check wallet for action",onClick:this.props.initiateSwap},"Next"),this.props.isPartyB&&s.a.createElement(ut,{wide:!0,primary:!0,disabled:!this.nextEnabled(),loadingAfterClick:!0,loadingAfterClickMessage:"Check wallet for action",onClick:this.props.confirmSwap},"Confirm Terms"),s.a.createElement("div",{className:"SwapInitiation_errors"},this.getErrors().map(function(e){return s.a.createElement("p",{key:e},e)}))))}}]),t}(r.Component)),da=Object(m.connect)(function(e){return{expiration:e.swap.expiration,isPartyB:e.swap.isPartyB,wallets:e.swap.wallets,assets:e.swap.assets,counterParty:e.swap.counterParty,transactions:e.swap.transactions,isVerified:e.swap.isVerified}},{initiateSwap:Te.initiateSwap,confirmSwap:Te.confirmSwap,switchSides:Te.switchSides})(pa),ma=(a(372),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"BrandCard "+this.props.className},s.a.createElement("h1",{className:"BrandCard_title"},this.props.title),this.props.children)}}]),t}(r.Component)),ha=a(30),fa=a.n(ha),ba=(a(374),aa(function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(ma,{className:"CounterPartyLinkCard",title:"Swap Initiated"},s.a.createElement("img",{className:"CounterPartyLinkCard_icon",src:fa.a,alt:"Completed"}),s.a.createElement("p",{className:"CounterPartyLinkCard_description"},"To continue, share this link with your counterparty"),s.a.createElement("p",null,s.a.createElement(ut,{wide:!0,secondary:!0,onClick:this.props.onCopyClick,icon:ra.a},"Counterparty Link")),s.a.createElement("p",null,s.a.createElement(ut,{wide:!0,primary:!0,onClick:this.props.onNextClick},"Link Sent")))}}]),t}(r.Component))),ya=(a(376),aa(function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(ma,{className:"BackupLinkCard",title:"Backup"},s.a.createElement("img",{className:"BackupLinkCard_icon",src:fa.a,alt:"Completed"}),s.a.createElement("p",{className:"BackupLinkCard_description"},"You need this link to claim your funds if your browser closes."),s.a.createElement("p",null,"Please copy this link by clicking the button below. Save it in a safe place."),s.a.createElement("p",null,s.a.createElement(ut,{wide:!0,secondary:!0,onClick:function(){return e.props.onCopyClick()},icon:ra.a},"Backup Link")),s.a.createElement("p",null,s.a.createElement(ut,{wide:!0,primary:!0,onClick:this.props.onNextClick},"Next")))}}]),t}(r.Component))),wa=(a(378),a(123)),va=a.n(wa),Ea=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,this.props.open&&s.a.createElement("div",{className:"ErrorModal"},s.a.createElement("img",{className:"ErrorModal_close",src:va.a,onClick:this.props.onClose,alt:"Close"}),this.props.error&&this.props.error.toString()))}}]),t}(r.Component),Ca=a(124),ga=a.n(Ca),Sa=(a(380),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getWaitingStatus",value:function(){if(this.props.step===D.AGREEMENT)if(this.props.isPartyB){if(!this.props.transactions.b.claim.hash)return"Counterparty hasn't claimed.";if(!this.props.transactions.b.claim.confirmations>0)return"Counterparty has claimed. Awaiting confirmations."}else{if(!this.props.transactions.b.fund.hash)return"Counterparty hasn't confirmed terms.";if(!this.props.transactions.b.fund.confirmations>0)return"Counterparty has confirmed terms. Awaiting confirmations."}return""}},{key:"render",value:function(){return s.a.createElement(ma,{className:"Waiting",title:"Awaiting Counterparty"},s.a.createElement("p",{className:"Waiting_status"},this.getWaitingStatus()),s.a.createElement("p",null,"Thanks to the Atomic Swap you don't need to trust the counterparty and avoid the middlemen."),s.a.createElement("p",null,s.a.createElement("img",{className:"LiqualitySwap_logo",src:ga.a,alt:"Liquality Logo"})),s.a.createElement(ca,{isClaim:!0}))}}]),t}(r.Component)),ka=Object(m.connect)(function(e){return{step:e.swap.step,assets:e.swap.assets,transactions:e.swap.transactions,expiration:e.swap.expiration,isPartyB:e.swap.isPartyB}},{})(Sa),Oa=(a(382),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(ma,{className:"SwapRedemption",title:"Claim Funds"},s.a.createElement("div",{className:"SwapRedemption_confirmation"},s.a.createElement("p",{className:"SwapRedemption_terms"},"Get ",s.a.createElement("strong",null,this.props.assets.b.value," ",fe[this.props.assets.b.currency].code),"\xa0for ",s.a.createElement("strong",null,this.props.assets.a.value," ",fe[this.props.assets.a.currency].code)),s.a.createElement("p",null,"Thanks to the ",s.a.createElement("strong",null,"Atomic Swap")," you don't need to trust the counterparty and avoid the middleman.")),s.a.createElement(ca,{isClaim:!0}),s.a.createElement("p",null,s.a.createElement(ut,{wide:!0,primary:!0,loadingAfterClick:!0,loadingAfterClickMessage:"Check wallet for action",onClick:this.props.redeemSwap},"Claim your funds")))}}]),t}(r.Component)),_a=Object(m.connect)(function(e){return{assets:e.swap.assets,expiration:e.swap.expiration,isPartyB:e.swap.isPartyB}},{redeemSwap:Te.redeemSwap})(Oa),ja=(a(384),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"SwapCompleted"},s.a.createElement(Wt,{haveCurrency:this.props.assets.a.currency,wantCurrency:this.props.assets.b.currency,haveLabel:"Sent",wantLabel:"Received",icon:fa.a,onIconClick:function(){return e.props.switchSides()}}),s.a.createElement("div",{className:"SwapCompleted_top"},s.a.createElement(Mt,{disabled:!0}),s.a.createElement("h2",{className:"SwapCompleted_label"},"Swap Completed"),s.a.createElement("p",{className:"SwapCompleted_subLabel"},"Go to ","btc"===this.props.assets.b.currency?"Ledger Live":"MetaMask"," to confirm your balance"),s.a.createElement("span",{className:"SwapCompleted_handshake"},s.a.createElement("img",{src:oa.a,alt:""}))),s.a.createElement("div",{className:"SwapCompleted_bottom"},s.a.createElement(ut,{wide:!0,primary:!0,onClick:function(){return window.location.replace("/")}},"Start another Swap"),_.twitterButton&&s.a.createElement("a",{className:"twitter-share-button",href:"https://twitter.com/intent/tweet"+_.twitterButton,"data-size":"large"},"Tweet")))}}]),t}(r.Component)),Na=Object(m.connect)(function(e){return{assets:e.swap.assets}})(ja),Ta=(a(386),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(ma,{className:"SwapRefund",title:"Refund"},s.a.createElement("div",{className:"SwapRefund_confirmation"},s.a.createElement("p",{className:"SwapRefund_terms"},this.props.assets.a.value," ",fe[this.props.assets.a.currency].code),s.a.createElement("p",null,"Your funds are ready for a refund.")),s.a.createElement("p",null,s.a.createElement(ut,{wide:!0,primary:!0,loadingAfterClick:!0,loadingAfterClickMessage:"Check wallet for action",onClick:this.props.refundSwap},"Get Refund")))}}]),t}(r.Component)),Pa=Object(m.connect)(function(e){return{assets:e.swap.assets,expiration:e.swap.expiration,isPartyB:e.swap.isPartyB}},{refundSwap:Te.refundSwap})(Ta),xa=a(51),Aa=(a(388),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=F.findIndex(function(t){return t.id===e.props.state}),a=s.a.createElement(xa.b,{classes:{active:"SwapProgressStepper_connector_active",completed:"SwapProgressStepper_connector_completed",line:"SwapProgressStepper_connector_line",root:"SwapProgressStepper_connector"}});return s.a.createElement(xa.d,{connector:a,activeStep:t,alternativeLabel:!0,className:"SwapProgressStepper"},F.map(function(e,a){var n={classes:{root:"SwapProgressStepper_icon",text:"SwapProgressStepper_icon_text",active:"SwapProgressStepper_icon_active",completed:"SwapProgressStepper_icon_completed"}};return a<t&&(n.icon=s.a.createElement("img",{src:fa.a,alt:"Completed"})),s.a.createElement(xa.a,{key:e.id},s.a.createElement(xa.c,{classes:{label:"SwapProgressStepper_label",alternativeLabel:"SwapProgressStepper_alternativeLabel",active:"SwapProgressStepper_label_active",completed:"SwapProgressStepper_label_completed"},StepIconProps:n},e.label))}))}}]),t}(r.Component)),Ia=a(125),La=a.n(Ia),Wa=(a(407),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).getCounterPartyLinkCard=a.getCounterPartyLinkCard.bind(Object(st.a)(Object(st.a)(a))),a.getBackupLinkCard=a.getBackupLinkCard.bind(Object(st.a)(Object(st.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getBackupLinkCard",value:function(){var e=this,t=this.props.swap.link;return s.a.createElement(ya,{link:t,onNextClick:function(){return e.props.history.replace(e.props.swap.isPartyB?"/waiting":"/counterPartyLink")}})}},{key:"getCounterPartyLinkCard",value:function(){var e=this,t=X(this.props.swap,!0);return s.a.createElement(ba,{link:t,onNextClick:function(){e.props.waitForSwapConfirmation()}})}},{key:"render",value:function(){return s.a.createElement("div",{className:"LiqualitySwap"},s.a.createElement("div",{className:"LiqualitySwap_bar"}),s.a.createElement("div",{className:"LiqualitySwap_header"},s.a.createElement("img",{className:"LiqualitySwap_logo",src:La.a,alt:"Liquality Logo"}),s.a.createElement(Aa,{state:this.props.swap.step})),s.a.createElement("div",{className:"LiqualitySwap_main"},s.a.createElement("div",{className:"LiqualitySwap_wave"}),s.a.createElement("div",{className:"LiqualitySwap_wrapper"},s.a.createElement(ct.a,{exact:!0,path:"/",component:da}),s.a.createElement(ct.a,{path:"/backupLink",render:this.getBackupLinkCard}),s.a.createElement(ct.a,{path:"/counterPartyLink",render:this.getCounterPartyLinkCard}),s.a.createElement(ct.a,{path:"/waiting",component:ka}),s.a.createElement(ct.a,{path:"/redeem",component:_a}),s.a.createElement(ct.a,{path:"/completed",component:Na}),s.a.createElement(ct.a,{path:"/refund",component:Pa}))),s.a.createElement("footer",{dangerouslySetInnerHTML:{__html:_.injectFooter}}),s.a.createElement(Ea,{open:this.props.error,error:this.props.error,onClose:this.props.clearError}))}}]),t}(r.Component)),Ra=Object(rt.a)(Object(m.connect)(function(e){return{swap:e.swap,error:e.error}},{waitForSwapConfirmation:Te.waitForSwapConfirmation,waitForSwapClaim:Te.waitForSwapClaim,clearError:g.clearError})(Wa));a(409);window.onbeforeunload=function(){return!0},window.onerror=nt,window.onunhandledrejection=function(e){return nt(e.reason)},tt.swap&&(at.dispatch(oe.loadTransactions()),tt.swap.isPartyB&&(at.dispatch(oe.setTransaction("b","fund",tt.swap.transactions.b.fund)),at.dispatch(Te.verifyInitiateSwapTransaction)));var Ba,Ha,Da=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(m.Provider,{store:at},s.a.createElement(h.ConnectedRouter,{history:et},s.a.createElement(Ra,null)))}}]),t}(r.Component),Fa=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("h2",{style:{marginTop:"60px",textAlign:"center"}},"MetaMask is needed to run Liquality Atomic Swap. You can download it from here: ",s.a.createElement("a",{href:"https://metamask.io/"},"metamask.io"))}}]),t}(r.Component),Ma=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Va(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}Ba=_.injectScript,(Ha=document.createElement("script")).type="text/javascript",Ha.innerHTML=Ba,document.getElementsByTagName("head")[0].appendChild(Ha),"undefined"===typeof web3?i.a.render(s.a.createElement(Fa,null),document.getElementById("root")):i.a.render(s.a.createElement(Da,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(".","/service-worker.js");Ma?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Va(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Va(e)})}}()},44:function(e,t,a){e.exports=a.p+"static/media/copy.26f38b83.svg"},62:function(e,t,a){e.exports=a.p+"static/media/clock.baea04ec.svg"},63:function(e,t,a){e.exports=a.p+"static/media/handshake.35e4ba88.png"}},[[220,2,1]]]);
//# sourceMappingURL=main.42caa68b.chunk.js.map